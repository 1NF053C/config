Bootstrap: docker
From: node:18-alpine

%files
    ./environment.sh /environment.sh
    ./compute.def /compute.def
    ./build.sh /build.sh
    ./run.sh /run.sh
    ./include/* /include/

%appinstall compute
    mv /build.sh ${XDG_CONFIG_HOME}/compute/
    mv /run.sh ${XDG_CONFIG_HOME}/compute/
    mv /environment.sh ${XDG_CONFIG_HOME}/compute/
    cp /include/* ${XDG_CONFIG_HOME}/compute/include
    . ${XDG_CONFIG_HOME}/buildapp.sh

%apprun compute
    apptainer run --app app --containall ${XDG_DATA_HOME}/compute/app.sif

%labels
    Author 1nf053c
    Version 1.0
    Description "Container for compute"
